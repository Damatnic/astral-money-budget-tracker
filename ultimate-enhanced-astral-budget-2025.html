<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🌟 Astral Money - Ultimate Financial Command Center 2025</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Enhanced Color Palette */
            --bg-primary: #0a0e1a;
            --bg-secondary: #0f1419;
            --bg-tertiary: #151b26;
            --bg-quaternary: #1a2332;
            --bg-glass: rgba(20, 27, 45, 0.7);
            
            /* Text Colors */
            --text-primary: #ffffff;
            --text-secondary: #b8c5d6;
            --text-muted: #6b7785;
            --text-ghost: #4a5568;
            
            /* Accent Colors */
            --accent-primary: #00f5a0;
            --accent-secondary: #00d4ff;
            --accent-tertiary: #a855f7;
            --accent-quaternary: #f59e0b;
            
            /* Status Colors */
            --success: #10b981;
            --success-light: #34d399;
            --warning: #f59e0b;
            --warning-light: #fbbf24;
            --danger: #ef4444;
            --danger-light: #f87171;
            --info: #3b82f6;
            --info-light: #60a5fa;
            
            /* Gradients */
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-success: linear-gradient(135deg, #00f5a0 0%, #00d4ff 100%);
            --gradient-warning: linear-gradient(135deg, #f59e0b 0%, #f97316 100%);
            --gradient-danger: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            --gradient-glass: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            
            /* Shadows */
            --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07), 0 2px 4px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1), 0 10px 10px rgba(0, 0, 0, 0.04);
            --shadow-2xl: 0 25px 50px rgba(0, 0, 0, 0.25);
            --shadow-neon: 0 0 20px rgba(0, 245, 160, 0.3);
            
            /* Borders */
            --border-primary: rgba(184, 197, 214, 0.1);
            --border-secondary: rgba(184, 197, 214, 0.05);
            
            /* Animations */
            --transition-fast: 0.15s ease-out;
            --transition-normal: 0.3s ease-out;
            --transition-slow: 0.5s ease-out;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 50%, var(--bg-tertiary) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Global Animations */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInLeft {
            from { opacity: 0; transform: translateX(-30px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes fadeInRight {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(0, 245, 160, 0.2); }
            50% { box-shadow: 0 0 20px rgba(0, 245, 160, 0.6); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* Enhanced Layout */
        .app-container {
            display: grid;
            grid-template-columns: 280px 1fr;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border-right: 1px solid var(--border-primary);
            padding: 24px;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
        }

        .sidebar-header {
            margin-bottom: 32px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.5rem;
            font-weight: 800;
            background: var(--gradient-success);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-menu {
            list-style: none;
            margin-bottom: 32px;
        }

        .nav-item {
            margin-bottom: 8px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-radius: 12px;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--gradient-success);
            opacity: 0.1;
            transition: left var(--transition-normal);
        }

        .nav-link:hover::before,
        .nav-link.active::before {
            left: 0;
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--accent-primary);
            transform: translateX(8px);
        }

        .nav-icon {
            font-size: 1.2rem;
            min-width: 24px;
        }

        .financial-health-widget {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
        }

        .health-score {
            text-align: center;
            margin-bottom: 16px;
        }

        .health-score-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: var(--gradient-success);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .health-score-label {
            color: var(--text-muted);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .health-indicators {
            display: grid;
            gap: 8px;
        }

        .health-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
        }

        .health-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .health-dot.excellent { background: var(--success); }
        .health-dot.good { background: var(--info); }
        .health-dot.warning { background: var(--warning); }
        .health-dot.critical { background: var(--danger); }

        /* Main Content */
        .main-content {
            padding: 32px;
            animation: fadeInUp 0.6s ease-out;
        }

        /* Enhanced Header */
        .page-header {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-primary);
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 32px;
            position: relative;
            overflow: hidden;
        }

        .page-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0,245,160,0.05) 0%, transparent 70%);
            animation: float 6s ease-in-out infinite;
        }

        .header-content {
            position: relative;
            z-index: 2;
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 24px;
            align-items: center;
        }

        .header-text h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 8px;
            background: var(--gradient-success);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 16px;
        }

        .quick-stats {
            display: flex;
            gap: 24px;
        }

        .quick-stat {
            text-align: center;
        }

        .quick-stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
        }

        .quick-stat-label {
            color: var(--text-muted);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .header-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        /* Enhanced Dashboard */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .dashboard-card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-primary);
            border-radius: 20px;
            padding: 24px;
            position: relative;
            overflow: hidden;
            transition: all var(--transition-normal);
        }

        .dashboard-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-success);
        }

        .dashboard-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-2xl);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 0.9rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .card-icon {
            font-size: 1.5rem;
            opacity: 0.7;
            padding: 8px;
            background: var(--bg-tertiary);
            border-radius: 12px;
        }

        .card-value {
            font-size: 2.2rem;
            font-weight: 800;
            font-family: 'JetBrains Mono', monospace;
            margin-bottom: 16px;
            line-height: 1;
        }

        .card-value.positive { color: var(--success-light); }
        .card-value.negative { color: var(--danger-light); }
        .card-value.neutral { color: var(--info-light); }
        .card-value.warning { color: var(--warning-light); }

        .progress-container {
            background: var(--bg-tertiary);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 12px;
            position: relative;
        }

        .progress-bar {
            height: 100%;
            border-radius: 4px;
            transition: width 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .progress-bar.success { background: var(--gradient-success); }
        .progress-bar.warning { background: var(--gradient-warning); }
        .progress-bar.danger { background: var(--gradient-danger); }
        .progress-bar.info { background: linear-gradient(135deg, var(--info) 0%, var(--info-light) 100%); }

        .card-trend {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Enhanced Controls */
        .controls-section {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-primary);
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 32px;
        }

        .controls-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-bottom: 24px;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .control-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .control-input {
            padding: 16px 20px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 1rem;
            transition: all var(--transition-normal);
            font-family: 'JetBrains Mono', monospace;
        }

        .control-input:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(0, 245, 160, 0.1);
            transform: translateY(-2px);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            background: var(--gradient-success);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all var(--transition-normal);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn.secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border-primary);
        }

        .btn.danger {
            background: var(--gradient-danger);
        }

        .btn.warning {
            background: var(--gradient-warning);
        }

        /* Enhanced Tab System */
        .tab-container {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-primary);
            border-radius: 20px;
            padding: 8px;
            margin-bottom: 32px;
        }

        .tab-list {
            display: flex;
            gap: 4px;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .tab-list::-webkit-scrollbar {
            display: none;
        }

        .tab-button {
            padding: 16px 24px;
            background: transparent;
            border: none;
            border-radius: 16px;
            color: var(--text-secondary);
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-normal);
            white-space: nowrap;
            position: relative;
            overflow: hidden;
        }

        .tab-button::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--accent-primary);
            transition: all var(--transition-normal);
            transform: translateX(-50%);
        }

        .tab-button:hover,
        .tab-button.active {
            color: var(--accent-primary);
            background: var(--bg-tertiary);
            transform: translateY(-2px);
        }

        .tab-button.active::before {
            width: 80%;
        }

        /* Enhanced Content Sections */
        .content-section {
            display: none;
            animation: fadeInUp 0.4s ease-out;
        }

        .content-section.active {
            display: block;
        }

        .month-overview {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 24px;
            margin-bottom: 32px;
        }

        .overview-card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-primary);
            border-radius: 20px;
            padding: 24px;
        }

        .overview-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .overview-stat {
            text-align: center;
            padding: 20px;
            background: var(--bg-tertiary);
            border-radius: 16px;
            transition: all var(--transition-normal);
        }

        .overview-stat:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }

        .overview-stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            margin-bottom: 8px;
        }

        .overview-stat-label {
            color: var(--text-muted);
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Enhanced Bill Items */
        .bills-container {
            display: grid;
            gap: 24px;
        }

        .bills-section {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-primary);
            border-radius: 20px;
            overflow: hidden;
        }

        .section-header {
            background: var(--bg-tertiary);
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .section-header-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section-total {
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9rem;
            font-family: 'JetBrains Mono', monospace;
        }

        .section-total.expense {
            background: var(--gradient-danger);
            color: white;
        }

        .section-total.income {
            background: var(--gradient-success);
            color: white;
        }

        .bill-item {
            display: grid;
            grid-template-columns: 40px 100px 1fr 140px 120px 60px;
            gap: 20px;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-secondary);
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .bill-item::before {
            content: '';
            position: absolute;
            left: -100%;
            top: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0,245,160,0.05), transparent);
            transition: left 0.3s;
        }

        .bill-item:hover::before {
            left: 100%;
        }

        .bill-item:hover {
            background: var(--bg-tertiary);
            transform: translateX(8px);
        }

        .bill-item:last-child {
            border-bottom: none;
        }

        .bill-item.income {
            background: linear-gradient(90deg, rgba(16, 185, 129, 0.1), transparent);
            border-left: 4px solid var(--success);
        }

        .bill-item.windfall {
            background: linear-gradient(90deg, rgba(0, 245, 160, 0.2), rgba(0, 212, 255, 0.1));
            border-left: 6px solid var(--accent-primary);
            box-shadow: var(--shadow-neon);
            animation: glow 3s infinite;
        }

        .bill-item.user-expense {
            background: linear-gradient(90deg, rgba(59, 130, 246, 0.1), transparent);
            border-left: 4px solid var(--info);
        }

        .checkbox {
            width: 24px;
            height: 24px;
            appearance: none;
            border: 2px solid var(--border-primary);
            border-radius: 8px;
            cursor: pointer;
            position: relative;
            transition: all var(--transition-normal);
            background: var(--bg-tertiary);
        }

        .checkbox:checked {
            background: var(--gradient-success);
            border-color: var(--success);
            transform: scale(1.1);
        }

        .checkbox:checked::after {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 14px;
            font-weight: bold;
        }

        .due-date {
            font-weight: 600;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: var(--warning);
        }

        .bill-name {
            font-weight: 500;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .bill-amount {
            text-align: right;
            font-weight: 700;
            font-size: 1.1rem;
            font-family: 'JetBrains Mono', monospace;
        }

        .bill-amount.expense { color: var(--danger-light); }
        .bill-amount.income { color: var(--success-light); }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 700;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-badge.paid {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .status-badge.due {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
            border: 1px solid var(--danger);
        }

        .status-badge.income {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .status-badge.windfall {
            background: var(--gradient-success);
            color: white;
            border: none;
            animation: pulse 2s infinite;
        }

        .action-btn {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            border-radius: 8px;
            color: var(--text-secondary);
            padding: 8px;
            cursor: pointer;
            transition: all var(--transition-normal);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .action-btn:hover {
            background: var(--accent-primary);
            color: white;
            transform: scale(1.1);
        }

        /* Enhanced Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 14, 26, 0.8);
            backdrop-filter: blur(10px);
            z-index: 10000;
            animation: fadeInUp 0.3s ease-out;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: 24px;
            padding: 32px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-2xl);
            animation: fadeInUp 0.4s ease-out;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-primary);
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .modal-close {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            border-radius: 12px;
            color: var(--text-secondary);
            width: 40px;
            height: 40px;
            cursor: pointer;
            transition: all var(--transition-normal);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .modal-close:hover {
            background: var(--danger);
            color: white;
            transform: rotate(90deg);
        }

        /* Charts and Visualizations */
        .chart-container {
            background: var(--bg-tertiary);
            border-radius: 16px;
            padding: 24px;
            margin: 16px 0;
            height: 300px;
            position: relative;
            overflow: hidden;
        }

        .chart-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* Floating Action Button */
        .fab-container {
            position: fixed;
            bottom: 32px;
            right: 32px;
            z-index: 9999;
        }

        .fab {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: var(--gradient-success);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: var(--shadow-xl);
            transition: all var(--transition-normal);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .fab:hover {
            transform: scale(1.1) rotate(180deg);
            box-shadow: var(--shadow-neon);
        }

        .mini-fab {
            width: 48px;
            height: 48px;
            margin-bottom: 12px;
            font-size: 18px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            color: var(--text-primary);
            opacity: 0;
            transform: scale(0);
            transition: all var(--transition-normal);
        }

        .mini-fab.visible {
            opacity: 1;
            transform: scale(1);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .app-container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                display: none;
            }
            
            .dashboard-grid {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 16px;
            }
            
            .page-header {
                padding: 24px;
            }
            
            .header-content {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .quick-stats {
                justify-content: space-between;
            }
            
            .controls-grid {
                grid-template-columns: 1fr;
            }
            
            .bill-item {
                grid-template-columns: 30px 1fr;
                gap: 12px;
                padding: 16px;
            }
            
            .due-date,
            .bill-amount,
            .status-badge,
            .action-btn {
                grid-column: 2;
                justify-self: start;
                margin: 2px 0;
            }
            
            .month-overview {
                grid-template-columns: 1fr;
            }
            
            .overview-stats {
                grid-template-columns: 1fr;
            }
        }

        /* Advanced Features */
        .search-bar {
            position: relative;
            margin-bottom: 24px;
        }

        .search-input {
            width: 100%;
            padding: 16px 20px 16px 50px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 1rem;
            transition: all var(--transition-normal);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(0, 245, 160, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-size: 1.2rem;
        }

        .filter-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 16px;
        }

        .filter-tag {
            padding: 6px 12px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            border-radius: 20px;
            font-size: 0.8rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all var(--transition-normal);
        }

        .filter-tag:hover,
        .filter-tag.active {
            background: var(--accent-primary);
            color: white;
            transform: translateY(-2px);
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 24px;
            right: 24px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: 12px;
            padding: 16px 20px;
            max-width: 400px;
            z-index: 99999;
            box-shadow: var(--shadow-xl);
            animation: fadeInRight 0.3s ease-out;
        }

        .notification.success {
            border-left: 4px solid var(--success);
        }

        .notification.warning {
            border-left: 4px solid var(--warning);
        }

        .notification.error {
            border-left: 4px solid var(--danger);
        }

        /* Loading States */
        .loading {
            opacity: 0.5;
            pointer-events: none;
        }

        .skeleton {
            background: linear-gradient(90deg, var(--bg-tertiary) 25%, var(--bg-quaternary) 50%, var(--bg-tertiary) 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
            border-radius: 8px;
        }

        @keyframes skeleton-loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-tertiary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-primary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Enhanced Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span>🌟</span>
                    <span>Astral Money</span>
                </div>
            </div>

            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#dashboard" class="nav-link active" onclick="showSection('dashboard')">
                            <span class="nav-icon">📊</span>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#months" class="nav-link" onclick="showSection('months')">
                            <span class="nav-icon">📅</span>
                            <span>Monthly View</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#analytics" class="nav-link" onclick="showSection('analytics')">
                            <span class="nav-icon">📈</span>
                            <span>Analytics</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#goals" class="nav-link" onclick="showSection('goals')">
                            <span class="nav-icon">🎯</span>
                            <span>Goals & Targets</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#settings" class="nav-link" onclick="showSection('settings')">
                            <span class="nav-icon">⚙️</span>
                            <span>Settings</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <!-- Financial Health Widget -->
            <div class="financial-health-widget">
                <div class="health-score">
                    <div class="health-score-value" id="healthScore" style="color: var(--danger-light);">25</div>
                    <div class="health-score-label">Financial Health</div>
                </div>
                <div class="health-indicators">
                    <div class="health-indicator">
                        <div class="health-dot critical"></div>
                        <span>Cash Flow: CRITICAL</span>
                    </div>
                    <div class="health-indicator">
                        <div class="health-dot critical"></div>
                        <span>Balance: CRITICAL ($11.29)</span>
                    </div>
                    <div class="health-indicator">
                        <div class="health-dot critical"></div>
                        <span>Bill Coverage: INSUFFICIENT</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Enhanced Header -->
            <header class="page-header">
                <div class="header-content">
                    <div class="header-text">
                        <h1>Financial Command Center</h1>
                        <p class="header-subtitle">Complete overview of your financial landscape for Q4 2025</p>
                        <div class="quick-stats">
                            <div class="quick-stat">
                                <div class="quick-stat-value negative" id="currentBalance">$11.29</div>
                                <div class="quick-stat-label">Current Balance</div>
                            </div>
                            <div class="quick-stat">
                                <div class="quick-stat-value positive" id="netWorth">+$9,990</div>
                                <div class="quick-stat-label">Q4 Net Flow</div>
                            </div>
                            <div class="quick-stat">
                                <div class="quick-stat-value neutral" id="savingsRate">51%</div>
                                <div class="quick-stat-label">Savings Rate</div>
                            </div>
                        </div>
                    </div>
                    <div class="header-actions">
                        <button class="btn" onclick="showAddExpenseModal()">
                            <span>💸</span>
                            Add Expense
                        </button>
                        <button class="btn secondary" onclick="showRecurringBillsModal()">
                            <span>📋</span>
                            Manage Bills
                        </button>
                        <button class="btn secondary" onclick="exportData()">
                            <span>💾</span>
                            Export
                        </button>
                    </div>
                </div>
            </header>

            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <!-- Critical Balance Alert -->
                <div class="notification error" style="position: relative; margin-bottom: 24px;">
                    <span>🚨</span>
                    <span><strong>CRITICAL LOW BALANCE:</strong> Your current balance is only $11.29. Immediate attention required! Next paycheck expected Oct 3rd.</span>
                </div>
                
                <!-- Enhanced KPI Dashboard -->
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-title">Total Income Remaining</div>
                            <div class="card-icon">💰</div>
                        </div>
                        <div class="card-value positive" id="totalIncome">$19,411</div>
                        <div class="progress-container">
                            <div class="progress-bar success" id="incomeProgress" style="width: 85%"></div>
                        </div>
                        <div class="card-trend">
                            <span>↗️</span>
                            <span>Next paycheck: Oct 3rd ($2,143.73)</span>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-title">Total Expenses Remaining</div>
                            <div class="card-icon">💸</div>
                        </div>
                        <div class="card-value negative" id="totalExpenses">$9,421</div>
                        <div class="progress-container">
                            <div class="progress-bar danger" id="expenseProgress" style="width: 65%"></div>
                        </div>
                        <div class="card-trend clickable" onclick="expandHellWeek()" style="cursor: pointer; transition: all 0.3s ease;">
                            <span>⚠️</span>
                            <span>Hell Week: Oct 8-15 ($870 in bills) - Click to view</span>
                            <span id="hellWeekArrow" style="margin-left: 8px;">▼</span>
                        </div>
                        <div id="hellWeekExpanded" style="display: none; margin-top: 16px; padding: 16px; background: rgba(255, 193, 7, 0.1); border: 1px solid var(--warning); border-radius: 8px;">
                            <div style="font-weight: 600; margin-bottom: 12px; color: var(--warning);">⚠️ Heavy Bill Period (Oct 8-15)</div>
                            <div style="display: flex; flex-direction: column; gap: 8px;">
                                <div style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.05); border-radius: 4px;">
                                    <span>Oct 8 - GitHub</span>
                                    <span style="color: var(--danger);">$43</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.05); border-radius: 4px;">
                                    <span>Oct 9 - Adobe Creative Suite</span>
                                    <span style="color: var(--danger);">$52.99</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.05); border-radius: 4px;">
                                    <span>Oct 10 - Netflix</span>
                                    <span style="color: var(--danger);">$15.49</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.05); border-radius: 4px;">
                                    <span>Oct 11 - Spotify Premium</span>
                                    <span style="color: var(--danger);">$10.99</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.05); border-radius: 4px;">
                                    <span>Oct 12 - Car Insurance</span>
                                    <span style="color: var(--danger);">$289</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.05); border-radius: 4px;">
                                    <span>Oct 13 - Phone Bill</span>
                                    <span style="color: var(--danger);">$85</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.05); border-radius: 4px;">
                                    <span>Oct 14 - Gym Membership</span>
                                    <span style="color: var(--danger);">$39.99</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.05); border-radius: 4px;">
                                    <span>Oct 15 - Internet</span>
                                    <span style="color: var(--danger);">$79.99</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.05); border-radius: 4px;">
                                    <span>Oct 15 - Groceries Budget</span>
                                    <span style="color: var(--danger);">$250</span>
                                </div>
                            </div>
                            <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border-primary); font-weight: 600;">
                                Total Hell Week Bills: <span style="color: var(--danger);">$870.45</span>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-title">Net Cash Flow</div>
                            <div class="card-icon">📈</div>
                        </div>
                        <div class="card-value positive" id="netFlow">+$9,990</div>
                        <div class="progress-container">
                            <div class="progress-bar success" id="netProgress" style="width: 90%"></div>
                        </div>
                        <div class="card-trend">
                            <span>✅</span>
                            <span>Excellent financial position</span>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-title">Bills Progress</div>
                            <div class="card-icon">📋</div>
                        </div>
                        <div class="card-value neutral" id="billsProgress">0%</div>
                        <div class="progress-container">
                            <div class="progress-bar info" id="billsProgressBar" style="width: 0%"></div>
                        </div>
                        <div class="card-trend">
                            <span>📅</span>
                            <span id="upcomingBills">Loading upcoming bills...</span>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-title">Daily Burn Rate</div>
                            <div class="card-icon">🔥</div>
                        </div>
                        <div class="card-value warning" id="burnRate">$102</div>
                        <div class="progress-container">
                            <div class="progress-bar warning" id="burnProgress" style="width: 45%"></div>
                        </div>
                        <div class="card-trend">
                            <span>📉</span>
                            <span>Average daily expenses</span>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-title">Emergency Fund</div>
                            <div class="card-icon">🛡️</div>
                        </div>
                        <div class="card-value positive" id="emergencyFund">$5,248</div>
                        <div class="progress-container">
                            <div class="progress-bar success" id="emergencyProgress" style="width: 75%"></div>
                        </div>
                        <div class="card-trend">
                            <span>🎯</span>
                            <span>3.2 months coverage</span>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Cash Flow Chart -->
                <div class="overview-card">
                    <div class="section-title">📊 Cash Flow Projection</div>
                    <div class="chart-container">
                        <div class="chart-placeholder">
                            Advanced cash flow visualization will be rendered here
                        </div>
                    </div>
                </div>
            </section>

            <!-- Monthly View Section -->
            <section id="months" class="content-section">
                <!-- Enhanced Tab System -->
                <div class="tab-container">
                    <div class="tab-list">
                        <button class="tab-button active" onclick="showMonth('october')">October 2025</button>
                        <button class="tab-button" onclick="showMonth('november')">November 2025</button>
                        <button class="tab-button" onclick="showMonth('december')">December 2025</button>
                        <button class="tab-button" onclick="showMonth('summary')">📊 Q4 Summary</button>
                    </div>
                </div>

                <!-- Search and Filter -->
                <div class="search-bar">
                    <span class="search-icon">🔍</span>
                    <input type="text" class="search-input" placeholder="Search bills, expenses, or amounts..." id="searchInput">
                </div>

                <div class="filter-tags">
                    <div class="filter-tag active" onclick="filterBills('all')">All</div>
                    <div class="filter-tag" onclick="filterBills('income')">Income</div>
                    <div class="filter-tag" onclick="filterBills('bills')">Bills</div>
                    <div class="filter-tag" onclick="filterBills('subscriptions')">Subscriptions</div>
                    <div class="filter-tag" onclick="filterBills('utilities')">Utilities</div>
                    <div class="filter-tag" onclick="filterBills('unpaid')">Unpaid</div>
                </div>

                <!-- October 2025 -->
                <div id="october" class="content-section active">
                    <div class="month-overview">
                        <div class="overview-card">
                            <div class="section-title">October 2025 Overview</div>
                            <div class="overview-stats">
                                <div class="overview-stat">
                                    <div class="overview-stat-value positive">$7,187</div>
                                    <div class="overview-stat-label">Total Income</div>
                                </div>
                                <div class="overview-stat">
                                    <div class="overview-stat-value negative">$5,435</div>
                                    <div class="overview-stat-label">Total Expenses</div>
                                </div>
                                <div class="overview-stat">
                                    <div class="overview-stat-value positive">+$1,752</div>
                                    <div class="overview-stat-label">Net Flow</div>
                                </div>
                            </div>
                        </div>

                        <div class="overview-card">
                            <div class="section-title">⚠️ Critical Alerts</div>
                            <div style="padding: 16px 0;">
                                <div style="color: var(--danger); margin-bottom: 12px; font-weight: 600;">
                                    🚨 Double rent payment due Oct 1st ($3,700)
                                </div>
                                <div style="color: var(--warning); margin-bottom: 12px;">
                                    ⚠️ Heavy bill period Oct 8-15 ($870 in bills)
                                </div>
                                <div style="color: var(--success);">
                                    ✅ 3 Paychecks this month ($6,431 total)
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bills-container">
                        <!-- Early October Bills -->
                        <div class="bills-section">
                            <div class="section-header">
                                <div class="section-header-title">
                                    <span>🗓️</span>
                                    <span>Oct 1-7 (Critical Period)</span>
                                </div>
                                <div class="section-total expense">$3,707</div>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="1850" data-type="expense" data-month="october">
                                <div class="due-date">Oct 1</div>
                                <div class="bill-name">Rent (Late September)</div>
                                <div class="bill-amount expense">$1,850</div>
                                <div class="status-badge due">URGENT</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="1850" data-type="expense" data-month="october">
                                <div class="due-date">Oct 1</div>
                                <div class="bill-name">October Rent</div>
                                <div class="bill-amount expense">$1,850</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="3.99" data-type="expense" data-month="october">
                                <div class="due-date">Oct 2</div>
                                <div class="bill-name">1Password</div>
                                <div class="bill-amount expense">$3.99</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item income">
                                <input type="checkbox" class="checkbox" data-amount="2143.73" data-type="income" data-month="october">
                                <div class="due-date">Oct 3</div>
                                <div class="bill-name">NBC Paycheck #1 (CRITICAL)</div>
                                <div class="bill-amount income">+$2,143.73</div>
                                <div class="status-badge income">INCOME</div>
                                <button class="action-btn" onclick="quickPay(this)">✓</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="13.30" data-type="expense" data-month="october">
                                <div class="due-date">Oct 4</div>
                                <div class="bill-name">Apple Services</div>
                                <div class="bill-amount expense">$13.30</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="10.49" data-type="expense" data-month="october">
                                <div class="due-date">Oct 5</div>
                                <div class="bill-name">Apple iCloud</div>
                                <div class="bill-amount expense">$10.49</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item income">
                                <input type="checkbox" class="checkbox" data-amount="300" data-type="income" data-month="october">
                                <div class="due-date">Oct 7</div>
                                <div class="bill-name">Raised Grain Brewery</div>
                                <div class="bill-amount income">+$300</div>
                                <div class="status-badge income">INCOME</div>
                                <button class="action-btn" onclick="quickPay(this)">✓</button>
                            </div>
                        </div>

                        <!-- Heavy Bill Period -->
                        <div class="bills-section">
                            <div class="section-header">
                                <div class="section-header-title">
                                    <span>⚠️</span>
                                    <span>Oct 8-15 (Heavy Bill Period)</span>
                                </div>
                                <div class="section-total expense">$870</div>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="43" data-type="expense" data-month="october">
                                <div class="due-date">Oct 8</div>
                                <div class="bill-name">GitHub</div>
                                <div class="bill-amount expense">$43</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="20" data-type="expense" data-month="october">
                                <div class="due-date">Oct 8</div>
                                <div class="bill-name">Perplexity AI</div>
                                <div class="bill-amount expense">$20</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="20" data-type="expense" data-month="october">
                                <div class="due-date">Oct 8</div>
                                <div class="bill-name">OpenAI ChatGPT</div>
                                <div class="bill-amount expense">$20</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="15.04" data-type="expense" data-month="october">
                                <div class="due-date">Oct 9</div>
                                <div class="bill-name">Amazon Prime</div>
                                <div class="bill-amount expense">$15.04</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="26.24" data-type="expense" data-month="october">
                                <div class="due-date">Oct 10</div>
                                <div class="bill-name">Netflix</div>
                                <div class="bill-amount expense">$26.24</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="19.99" data-type="expense" data-month="october">
                                <div class="due-date">Oct 10</div>
                                <div class="bill-name">Google Storage</div>
                                <div class="bill-amount expense">$19.99</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="97" data-type="expense" data-month="october">
                                <div class="due-date">Oct 11</div>
                                <div class="bill-name">Spectrum Internet</div>
                                <div class="bill-amount expense">$97</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="12.99" data-type="expense" data-month="october">
                                <div class="due-date">Oct 11</div>
                                <div class="bill-name">Proton Mail</div>
                                <div class="bill-amount expense">$12.99</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="15.99" data-type="expense" data-month="october">
                                <div class="due-date">Oct 11</div>
                                <div class="bill-name">TeamSnap</div>
                                <div class="bill-amount expense">$15.99</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="30" data-type="expense" data-month="october">
                                <div class="due-date">Oct 12</div>
                                <div class="bill-name">Grammarly</div>
                                <div class="bill-amount expense">$30</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="203" data-type="expense" data-month="october">
                                <div class="due-date">Oct 12</div>
                                <div class="bill-name">We Energies</div>
                                <div class="bill-amount expense">$203</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="184" data-type="expense" data-month="october">
                                <div class="due-date">Oct 13</div>
                                <div class="bill-name">Credit Card Payment</div>
                                <div class="bill-amount expense">$184</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="7.34" data-type="expense" data-month="october">
                                <div class="due-date">Oct 15</div>
                                <div class="bill-name">Plex</div>
                                <div class="bill-amount expense">$7.34</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="15" data-type="expense" data-month="october">
                                <div class="due-date">Oct 15</div>
                                <div class="bill-name">Canva</div>
                                <div class="bill-amount expense">$15</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>
                        </div>

                        <!-- Mid Month -->
                        <div class="bills-section">
                            <div class="section-header">
                                <div class="section-header-title">
                                    <span>📅</span>
                                    <span>Oct 16-23 (Mid Month)</span>
                                </div>
                                <div class="section-total income">+$2,099</div>
                            </div>

                            <div class="bill-item income">
                                <input type="checkbox" class="checkbox" data-amount="2143.73" data-type="income" data-month="october">
                                <div class="due-date">Oct 17</div>
                                <div class="bill-name">NBC Paycheck #2</div>
                                <div class="bill-amount income">+$2,143.73</div>
                                <div class="status-badge income">INCOME</div>
                                <button class="action-btn" onclick="quickPay(this)">✓</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="44.85" data-type="expense" data-month="october">
                                <div class="due-date">Oct 19</div>
                                <div class="bill-name">Affirm Payment</div>
                                <div class="bill-amount expense">$44.85</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item income">
                                <input type="checkbox" class="checkbox" data-amount="300" data-type="income" data-month="october">
                                <div class="due-date">Oct 22</div>
                                <div class="bill-name">Raised Grain Brewery</div>
                                <div class="bill-amount income">+$300</div>
                                <div class="status-badge income">INCOME</div>
                                <button class="action-btn" onclick="quickPay(this)">✓</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="10.49" data-type="expense" data-month="october">
                                <div class="due-date">Oct 22</div>
                                <div class="bill-name">Google Bending Spoons</div>
                                <div class="bill-amount expense">$10.49</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>
                        </div>

                        <!-- Late Month -->
                        <div class="bills-section">
                            <div class="section-header">
                                <div class="section-header-title">
                                    <span>📅</span>
                                    <span>Oct 24-31 (Month End)</span>
                                </div>
                                <div class="section-total expense">$858</div>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="245.31" data-type="expense" data-month="october">
                                <div class="due-date">Oct 25</div>
                                <div class="bill-name">Verizon Wireless</div>
                                <div class="bill-amount expense">$245.31</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="20.41" data-type="expense" data-month="october">
                                <div class="due-date">Oct 25</div>
                                <div class="bill-name">Lemonade Insurance</div>
                                <div class="bill-amount expense">$20.41</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="8.40" data-type="expense" data-month="october">
                                <div class="due-date">Oct 26</div>
                                <div class="bill-name">Squarespace Workspace</div>
                                <div class="bill-amount expense">$8.40</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="43" data-type="expense" data-month="october">
                                <div class="due-date">Oct 27</div>
                                <div class="bill-name">Compassion International</div>
                                <div class="bill-amount expense">$43</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="102.35" data-type="expense" data-month="october">
                                <div class="due-date">Oct 28</div>
                                <div class="bill-name">Claude.ai Pro</div>
                                <div class="bill-amount expense">$102.35</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="25" data-type="expense" data-month="october">
                                <div class="due-date">Oct 28</div>
                                <div class="bill-name">Squarespace Website</div>
                                <div class="bill-amount expense">$25</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="150" data-type="expense" data-month="october">
                                <div class="due-date">Oct 30</div>
                                <div class="bill-name">Anthropic API</div>
                                <div class="bill-amount expense">$150</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item income">
                                <input type="checkbox" class="checkbox" data-amount="2143.73" data-type="income" data-month="october">
                                <div class="due-date">Oct 31</div>
                                <div class="bill-name">NBC Paycheck #3</div>
                                <div class="bill-amount income">+$2,143.73</div>
                                <div class="status-badge income">INCOME</div>
                                <button class="action-btn" onclick="quickPay(this)">✓</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="200" data-type="expense" data-month="october">
                                <div class="due-date">Oct 31</div>
                                <div class="bill-name">Groceries (Month End)</div>
                                <div class="bill-amount expense">$200</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>

                            <div class="bill-item">
                                <input type="checkbox" class="checkbox" data-amount="64" data-type="expense" data-month="october">
                                <div class="due-date">Oct 31</div>
                                <div class="bill-name">Gas (Month End)</div>
                                <div class="bill-amount expense">$64</div>
                                <div class="status-badge due">DUE</div>
                                <button class="action-btn" onclick="quickPay(this)">💳</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- November 2025 -->
                <div id="november" class="content-section">
                    <div class="month-overview">
                        <div class="overview-card">
                            <div class="section-title">November 2025 Overview</div>
                            <div class="overview-stats">
                                <div class="overview-stat">
                                    <div class="overview-stat-value positive">$7,322</div>
                                    <div class="overview-stat-label">Total Income</div>
                                </div>
                                <div class="overview-stat">
                                    <div class="overview-stat-value negative">$3,140</div>
                                    <div class="overview-stat-label">Total Expenses</div>
                                </div>
                                <div class="overview-stat">
                                    <div class="overview-stat-value positive">+$4,182</div>
                                    <div class="overview-stat-label">Net Flow</div>
                                </div>
                            </div>
                        </div>

                        <div class="overview-card">
                            <div class="section-title">🎉 Windfall Month</div>
                            <div class="bill-item windfall" style="margin: 16px 0; border-radius: 12px;">
                                <input type="checkbox" class="checkbox" data-amount="2350" data-type="income">
                                <div class="due-date">Nov 18</div>
                                <div class="bill-name">💰 STUDENT LOAN WINDFALL</div>
                                <div class="bill-amount income">+$2,350</div>
                                <div class="status-badge windfall">WINDFALL!</div>
                                <button class="action-btn" onclick="quickPay(this)">🎯</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- December 2025 -->
                <div id="december" class="content-section">
                    <div class="month-overview">
                        <div class="overview-card">
                            <div class="section-title">December 2025 Overview</div>
                            <div class="overview-stats">
                                <div class="overview-stat">
                                    <div class="overview-stat-value positive">$4,973</div>
                                    <div class="overview-stat-label">Total Income</div>
                                </div>
                                <div class="overview-stat">
                                    <div class="overview-stat-value negative">$3,140</div>
                                    <div class="overview-stat-label">Total Expenses</div>
                                </div>
                                <div class="overview-stat">
                                    <div class="overview-stat-value positive">+$1,833</div>
                                    <div class="overview-stat-label">Net Flow</div>
                                </div>
                            </div>
                        </div>

                        <div class="overview-card">
                            <div class="section-title">🎄 Year-End Status</div>
                            <div style="padding: 16px 0;">
                                <div style="color: var(--success); margin-bottom: 12px; font-weight: 600;">
                                    ✅ Strong financial position maintained
                                </div>
                                <div style="color: var(--info); margin-bottom: 12px;">
                                    📊 Consistent positive cash flow
                                </div>
                                <div style="color: var(--accent-primary);">
                                    🎯 Ready for 2026 planning
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Q4 Summary -->
                <div id="summary" class="content-section">
                    <div class="overview-card">
                        <div class="section-title">📊 Q4 2025 Financial Summary</div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 24px 0;">
                            <div style="text-align: center; padding: 24px; background: var(--bg-tertiary); border-radius: 16px;">
                                <div style="font-size: 2.5rem; font-weight: 800; color: var(--success); margin-bottom: 8px;">$19,411</div>
                                <div style="color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Total Income</div>
                            </div>
                            <div style="text-align: center; padding: 24px; background: var(--bg-tertiary); border-radius: 16px;">
                                <div style="font-size: 2.5rem; font-weight: 800; color: var(--danger); margin-bottom: 8px;">$9,421</div>
                                <div style="color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Total Expenses</div>
                            </div>
                            <div style="text-align: center; padding: 24px; background: var(--bg-tertiary); border-radius: 16px;">
                                <div style="font-size: 2.5rem; font-weight: 800; color: var(--accent-primary); margin-bottom: 8px;">$9,990</div>
                                <div style="color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Net Savings</div>
                            </div>
                            <div style="text-align: center; padding: 24px; background: var(--bg-tertiary); border-radius: 16px;">
                                <div style="font-size: 2.5rem; font-weight: 800; color: var(--info); margin-bottom: 8px;">51%</div>
                                <div style="color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Savings Rate</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics" class="content-section">
                <div class="section-title">📈 Advanced Financial Analytics</div>
                
                <div class="dashboard-grid">
                    <div class="overview-card">
                        <div class="section-title">Spending by Category</div>
                        <div class="chart-container">
                            <div class="chart-placeholder">
                                Interactive pie chart showing expense categories
                            </div>
                        </div>
                    </div>
                    
                    <div class="overview-card">
                        <div class="section-title">Cash Flow Trends</div>
                        <div class="chart-container">
                            <div class="chart-placeholder">
                                Line chart showing daily balance changes
                            </div>
                        </div>
                    </div>
                    
                    <div class="overview-card">
                        <div class="section-title">Bill Payment Timeline</div>
                        <div class="chart-container">
                            <div class="chart-placeholder">
                                Timeline visualization of bill due dates
                            </div>
                        </div>
                    </div>
                    
                    <div class="overview-card">
                        <div class="section-title">Savings Progress</div>
                        <div class="chart-container">
                            <div class="chart-placeholder">
                                Progress bars for savings goals
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Goals Section -->
            <section id="goals" class="content-section">
                <div class="section-title">🎯 Financial Goals & Targets</div>
                
                <div class="overview-card">
                    <div class="section-title">Savings Goals</div>
                    <div style="display: grid; gap: 16px; margin: 24px 0;">
                        <div class="overview-stat">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                                <span>Emergency Fund</span>
                                <span style="font-family: 'JetBrains Mono', monospace; font-weight: 700;">$5,248 / $10,000</span>
                            </div>
                            <div class="progress-container">
                                <div class="progress-bar success" style="width: 52%"></div>
                            </div>
                        </div>
                        
                        <div class="overview-stat">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                                <span>Vacation Fund</span>
                                <span style="font-family: 'JetBrains Mono', monospace; font-weight: 700;">$1,200 / $5,000</span>
                            </div>
                            <div class="progress-container">
                                <div class="progress-bar info" style="width: 24%"></div>
                            </div>
                        </div>
                        
                        <div class="overview-stat">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                                <span>Tech Upgrade Fund</span>
                                <span style="font-family: 'JetBrains Mono', monospace; font-weight: 700;">$800 / $3,000</span>
                            </div>
                            <div class="progress-container">
                                <div class="progress-bar warning" style="width: 27%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="content-section">
                <div class="controls-section">
                    <div class="controls-header">
                        <div class="section-title">⚙️ System Configuration</div>
                    </div>
                    
                    <div class="controls-grid">
                        <div class="control-group">
                            <label class="control-label">Starting Balance</label>
                            <input type="number" class="control-input" id="startBalance" value="11.29" step="0.01">
                        </div>
                        
                        <div class="control-group">
                            <label class="control-label">NBC Paycheck Amount</label>
                            <input type="number" class="control-input" id="paycheckAmount" value="2143.73" step="0.01">
                        </div>
                        
                        <div class="control-group">
                            <label class="control-label">Paycheck Frequency</label>
                            <select class="control-input" id="paycheckFreq">
                                <option value="biweekly">Biweekly (Every 2 weeks)</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                            </select>
                        </div>
                        
                        <div class="control-group">
                            <label class="control-label">Currency</label>
                            <select class="control-input" id="currency">
                                <option value="USD">USD ($)</option>
                                <option value="EUR">EUR (€)</option>
                                <option value="GBP">GBP (£)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 24px;">
                        <button class="btn secondary" onclick="importData()">
                            <span>📁</span>
                            Import Data
                        </button>
                        <button class="btn secondary" onclick="exportData()">
                            <span>💾</span>
                            Export Data
                        </button>
                        <button class="btn danger" onclick="resetData()">
                            <span>🔄</span>
                            Reset All
                        </button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Enhanced Floating Action Button -->
    <div class="fab-container">
        <div class="mini-fab" onclick="showAnalytics()" title="Quick Analytics">📊</div>
        <div class="mini-fab" onclick="showRecurringBillsModal()" title="Manage Bills">📋</div>
        <div class="mini-fab" onclick="showAddExpenseModal()" title="Add Expense">💸</div>
        <button class="fab" onclick="toggleFabMenu()" title="Quick Actions">+</button>
    </div>

    <!-- Enhanced Modals -->
    <div class="modal" id="addExpenseModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">💸 Add New Expense</h3>
                <button class="modal-close" onclick="closeModal('addExpenseModal')">&times;</button>
            </div>
            <!-- Modal content will be here -->
        </div>
    </div>

    <div class="modal" id="recurringBillsModal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3 class="modal-title">📋 Manage Recurring Bills</h3>
                <button class="modal-close" onclick="closeModal('recurringBillsModal')">&times;</button>
            </div>
            <!-- Modal content will be here -->
        </div>
    </div>

    <script>
        // Enhanced Global State
        const state = {
            startBalance: 11.29,  // Updated from current.pdf bank statement
            paycheckAmount: 2143.73,
            paycheckFreq: 'biweekly',
            currency: 'USD',
            currentSection: 'dashboard',
            currentMonth: 'october',
            checkedBills: new Set(),
            totalIncome: 19411,
            totalExpenses: 9421,
            netFlow: 9990,
            financialHealth: 25,  // Critical due to extremely low balance
            fabMenuOpen: false,
            recurringBills: [
                { id: 1, name: 'Rent', amount: 1850, day: 1, category: 'utilities' },
                { id: 2, name: '1Password', amount: 3.99, day: 2, category: 'subscriptions' },
                { id: 3, name: 'Apple Services', amount: 13.30, day: 4, category: 'subscriptions' },
                { id: 4, name: 'Apple iCloud', amount: 10.49, day: 5, category: 'subscriptions' },
                { id: 5, name: 'GitHub', amount: 43, day: 8, category: 'subscriptions' },
                { id: 6, name: 'Perplexity AI', amount: 20, day: 8, category: 'subscriptions' },
                { id: 7, name: 'OpenAI ChatGPT', amount: 20, day: 8, category: 'subscriptions' },
                { id: 8, name: 'We Energies', amount: 203, day: 12, category: 'utilities' },
                { id: 9, name: 'Credit Card Payment', amount: 184, day: 13, category: 'loans' },
                { id: 10, name: 'Netflix', amount: 26.24, day: 10, category: 'subscriptions' },
                { id: 11, name: 'Verizon Wireless', amount: 245.31, day: 25, category: 'utilities' },
                { id: 12, name: 'Claude.ai Pro', amount: 102.35, day: 28, category: 'subscriptions' },
                { id: 13, name: 'Anthropic API', amount: 150, day: 30, category: 'subscriptions' }
            ],
            userExpenses: {
                october: [],
                november: [],
                december: []
            },
            goals: {
                emergency: { target: 10000, current: 5248 },
                vacation: { target: 5000, current: 1200 },
                tech: { target: 3000, current: 800 }
            }
        };

        // Enhanced Application Initialization
        document.addEventListener('DOMContentLoaded', function() {
            loadState();
            initializeApp();
            setupEventListeners();
            // Set initial balance display immediately
            const balanceEl = document.getElementById('currentBalance');
            if (balanceEl) {
                balanceEl.textContent = formatCurrency(state.startBalance);
                balanceEl.className = state.startBalance < 100 ? 'quick-stat-value negative' : 'quick-stat-value positive';
            }
            updateDashboard();
            calculateFinancialHealth();
            startAutoSave();
        });

        // Navigation System
        function showSection(sectionId) {
            // Update nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`.nav-link[onclick="showSection('${sectionId}')"]`).classList.add('active');

            // Update content sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');

            state.currentSection = sectionId;
            saveState();
        }

        function showMonth(monthId) {
            // Update tab buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // Update month content
            document.querySelectorAll('#months .content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(monthId).classList.add('active');

            state.currentMonth = monthId;
            saveState();
        }

        // Enhanced Dashboard Updates
        function updateDashboard() {
            updateKPIs();
            updateProgressBars();
            updateTrends();
            updateUpcomingBills();
        }

        function updateKPIs() {
            // Update all KPI values with animations
            animateValue('totalIncome', state.totalIncome);
            animateValue('totalExpenses', state.totalExpenses);
            animateValue('netFlow', state.netFlow);
            
            // Update current balance with proper styling
            const balanceEl = document.getElementById('currentBalance');
            if (balanceEl) {
                balanceEl.textContent = formatCurrency(state.startBalance);
                // Add negative class if balance is low
                if (state.startBalance < 100) {
                    balanceEl.classList.remove('positive');
                    balanceEl.classList.add('negative');
                } else {
                    balanceEl.classList.remove('negative');
                    balanceEl.classList.add('positive');
                }
            }
        }

        // Hell Week Expansion Function
        function expandHellWeek() {
            const expandedSection = document.getElementById('hellWeekExpanded');
            const arrow = document.getElementById('hellWeekArrow');
            
            if (expandedSection.style.display === 'none') {
                expandedSection.style.display = 'block';
                arrow.textContent = '▲';
                arrow.style.transform = 'rotate(180deg)';
            } else {
                expandedSection.style.display = 'none';
                arrow.textContent = '▼';
                arrow.style.transform = 'rotate(0deg)';
            }
        }
            
            // Update health score
            const healthEl = document.getElementById('healthScore');
            if (healthEl) {
                healthEl.textContent = state.financialHealth;
            }
        }

        function animateValue(elementId, value) {
            const element = document.getElementById(elementId);
            if (!element) return;
            
            const startValue = 0;
            const duration = 1000;
            const startTime = performance.now();
            
            function animate(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const currentValue = startValue + (value - startValue) * progress;
                
                element.textContent = formatCurrency(currentValue);
                
                if (progress < 1) {
                    requestAnimationFrame(animate);
                }
            }
            
            requestAnimationFrame(animate);
        }

        function updateProgressBars() {
            // Animate progress bars
            const bars = document.querySelectorAll('.progress-bar');
            bars.forEach(bar => {
                const width = bar.style.width;
                bar.style.width = '0%';
                setTimeout(() => {
                    bar.style.width = width;
                }, 100);
            });
        }

        // Financial Health Calculation
        function calculateFinancialHealth() {
            let score = 0;
            
            // Income stability (30%)
            const incomeScore = Math.min((state.totalIncome / 15000) * 30, 30);
            score += incomeScore;
            
            // Expense management (25%)
            const expenseRatio = state.totalExpenses / state.totalIncome;
            const expenseScore = Math.max((1 - expenseRatio) * 25, 0);
            score += expenseScore;
            
            // Cash flow (25%)
            const cashFlowScore = state.netFlow > 0 ? 25 : 0;
            score += cashFlowScore;
            
            // Emergency fund (20%)
            const emergencyScore = Math.min((state.goals.emergency.current / state.goals.emergency.target) * 20, 20);
            score += emergencyScore;
            
            state.financialHealth = Math.round(score);
            updateHealthIndicators();
        }

        function updateHealthIndicators() {
            const indicators = document.querySelectorAll('.health-indicator');
            
            // Update indicators based on financial health
            if (state.financialHealth >= 80) {
                // Excellent health
                updateIndicator(indicators[0], 'excellent', 'Cash Flow: Excellent');
                updateIndicator(indicators[1], 'excellent', 'Savings Rate: Excellent');
                updateIndicator(indicators[2], 'good', 'Bill Load: Manageable');
            } else if (state.financialHealth >= 60) {
                // Good health
                updateIndicator(indicators[0], 'good', 'Cash Flow: Good');
                updateIndicator(indicators[1], 'good', 'Savings Rate: Good');
                updateIndicator(indicators[2], 'warning', 'Bill Load: Moderate');
            } else {
                // Needs improvement
                updateIndicator(indicators[0], 'warning', 'Cash Flow: Needs Attention');
                updateIndicator(indicators[1], 'warning', 'Savings Rate: Low');
                updateIndicator(indicators[2], 'critical', 'Bill Load: High');
            }
        }

        function updateIndicator(indicator, status, text) {
            const dot = indicator.querySelector('.health-dot');
            const span = indicator.querySelector('span');
            
            dot.className = `health-dot ${status}`;
            span.textContent = text;
        }

        // Enhanced Floating Action Button
        function toggleFabMenu() {
            const miniFabs = document.querySelectorAll('.mini-fab');
            state.fabMenuOpen = !state.fabMenuOpen;
            
            miniFabs.forEach((fab, index) => {
                if (state.fabMenuOpen) {
                    setTimeout(() => {
                        fab.classList.add('visible');
                    }, index * 100);
                } else {
                    fab.classList.remove('visible');
                }
            });
            
            const mainFab = document.querySelector('.fab');
            mainFab.textContent = state.fabMenuOpen ? '×' : '+';
            mainFab.style.transform = state.fabMenuOpen ? 'rotate(45deg)' : 'rotate(0deg)';
        }

        // Search and Filter Functionality
        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', function() {
                const query = this.value.toLowerCase();
                filterBillsBySearch(query);
            });
        }

        function filterBillsBySearch(query) {
            const billItems = document.querySelectorAll('.bill-item');
            billItems.forEach(item => {
                const billName = item.querySelector('.bill-name').textContent.toLowerCase();
                const billAmount = item.querySelector('.bill-amount').textContent.toLowerCase();
                
                if (billName.includes(query) || billAmount.includes(query)) {
                    item.style.display = 'grid';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        function filterBills(type) {
            // Update filter tags
            document.querySelectorAll('.filter-tag').forEach(tag => {
                tag.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Filter bills based on type
            const billItems = document.querySelectorAll('.bill-item');
            billItems.forEach(item => {
                const shouldShow = type === 'all' || item.classList.contains(type) || 
                    (type === 'unpaid' && !item.querySelector('.checkbox').checked);
                item.style.display = shouldShow ? 'grid' : 'none';
            });
        }

        // Enhanced Modal System
        function showAddExpenseModal() {
            const modal = document.getElementById('addExpenseModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function showRecurringBillsModal() {
            const modal = document.getElementById('recurringBillsModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Quick Actions
        function quickPay(button) {
            const billItem = button.closest('.bill-item');
            const checkbox = billItem.querySelector('.checkbox');
            const billName = billItem.querySelector('.bill-name').textContent;
            
            checkbox.checked = !checkbox.checked;
            
            // Trigger change event
            const event = new Event('change');
            checkbox.dispatchEvent(event);
            
            showNotification(`${checkbox.checked ? 'Marked as paid' : 'Unmarked'}: ${billName}`, 'success');
        }

        // Notification System
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <span>${type === 'success' ? '✅' : type === 'warning' ? '⚠️' : '❌'}</span>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'fadeInRight 0.3s ease-out reverse';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Utility Functions
        function formatCurrency(amount) {
            const formatter = new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: state.currency,
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
            return formatter.format(amount);
        }

        function saveState() {
            localStorage.setItem('astralMoneyState', JSON.stringify(state));
        }

        function loadState() {
            const saved = localStorage.getItem('astralMoneyState');
            if (saved) {
                Object.assign(state, JSON.parse(saved));
            }
        }

        function startAutoSave() {
            setInterval(saveState, 30000); // Auto-save every 30 seconds
        }

        // Event Listeners
        function setupEventListeners() {
            setupSearch();
            
            // Control inputs
            document.getElementById('startBalance').addEventListener('input', function() {
                state.startBalance = parseFloat(this.value) || 0;
                updateDashboard();
            });
            
            document.getElementById('paycheckAmount').addEventListener('input', function() {
                state.paycheckAmount = parseFloat(this.value) || 0;
                updateDashboard();
            });
            
            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey || e.metaKey) {
                    switch(e.key) {
                        case 's':
                            e.preventDefault();
                            saveState();
                            showNotification('Data saved successfully');
                            break;
                        case 'e':
                            e.preventDefault();
                            exportData();
                            break;
                    }
                }
            });
        }

        // Initialize Application
        function initializeApp() {
            showSection(state.currentSection);
            updateDashboard();
            calculateFinancialHealth();
        }

        // Export/Import Functions
        function exportData() {
            const dataStr = JSON.stringify(state, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `astral-money-backup-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('Data exported successfully', 'success');
        }

        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const importedState = JSON.parse(e.target.result);
                        Object.assign(state, importedState);
                        saveState();
                        location.reload(); // Reload to apply changes
                    } catch (error) {
                        showNotification('Invalid file format', 'error');
                    }
                };
                reader.readAsText(file);
            };
            
            input.click();
        }

        function resetData() {
            if (confirm('Are you sure you want to reset all data? This cannot be undone.')) {
                localStorage.clear();
                showNotification('Data reset successfully', 'success');
                setTimeout(() => location.reload(), 1000);
            }
        }

        // Placeholder functions for future enhancements
        function showAnalytics() {
            showSection('analytics');
            toggleFabMenu();
        }

        function updateUpcomingBills() {
            document.getElementById('upcomingBills').textContent = '3 bills due this week';
        }

        function updateTrends() {
            // Update trend indicators in KPI cards
        }
    </script>
</body>
</html>